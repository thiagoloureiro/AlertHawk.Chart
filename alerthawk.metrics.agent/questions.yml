categories:
  - Basic
  - Image
  - Deployment
  - Environment Variables
  - Security
  - Resources

questions:
  # Basic Configuration
  - variable: nameOverride
    label: "Deployment Name Override"
    description: "Override the default deployment name (default: alerthawk)"
    type: string
    default: "alerthawk"
    group: "Basic"

  - variable: replicas
    label: "Number of Replicas"
    description: "Number of pod replicas to run"
    type: int
    default: 1
    min: 1
    group: "Basic"

  # Image Configuration
  - variable: image.repository
    label: "Image Repository"
    description: "Container image repository"
    type: string
    default: "thiagoguaru/alerthawk.metrics"
    group: "Image"

  - variable: image.tag
    label: "Image Tag"
    description: "Container image tag/version"
    type: string
    default: "3.1.7"
    group: "Image"

  - variable: image.pullPolicy
    label: "Image Pull Policy"
    description: "Image pull policy (Always, IfNotPresent, Never)"
    type: enum
    default: "Always"
    options:
      - "Always"
      - "IfNotPresent"
      - "Never"
    group: "Image"

  # Deployment Configuration
  - variable: strategy.type
    label: "Deployment Strategy"
    description: "Deployment strategy type"
    type: enum
    default: "RollingUpdate"
    options:
      - "RollingUpdate"
      - "Recreate"
    group: "Deployment"

  - variable: strategy.rollingUpdate.maxSurge
    label: "Max Surge"
    description: "Maximum number of pods that can be created over the desired number (e.g., 25%, 1)"
    type: string
    default: "25%"
    group: "Deployment"
    show_if: "strategy.type=RollingUpdate"

  - variable: strategy.rollingUpdate.maxUnavailable
    label: "Max Unavailable"
    description: "Maximum number of pods that can be unavailable during update (e.g., 25%, 1)"
    type: string
    default: "25%"
    group: "Deployment"
    show_if: "strategy.type=RollingUpdate"

  - variable: serviceAccount.create
    label: "Create Service Account"
    description: "Create a new service account for the metrics agent"
    type: boolean
    default: true
    group: "Deployment"

  - variable: serviceAccount.name
    label: "Service Account Name"
    description: "Kubernetes service account name"
    type: string
    default: "alerthawk-sa"
    group: "Deployment"
    show_if: "serviceAccount.create=true"

  - variable: serviceAccount.clusterRoleBinding.create
    label: "Create ClusterRoleBinding"
    description: "Create a ClusterRoleBinding to grant cluster-admin permissions to the service account"
    type: boolean
    default: true
    group: "Deployment"
    show_if: "serviceAccount.create=true"

  - variable: serviceAccount.clusterRoleBinding.clusterRole
    label: "Cluster Role"
    description: "Cluster role to bind to the service account (default: cluster-admin)"
    type: string
    default: "cluster-admin"
    group: "Deployment"
    show_if: "serviceAccount.clusterRoleBinding.create=true"

  # Environment Variables
  - variable: env.METRICS_COLLECTION_INTERVAL_SECONDS
    label: "Metrics Collection Interval (seconds)"
    description: "Interval in seconds for collecting metrics from Kubernetes"
    type: int
    default: 40
    min: 1
    group: "Environment Variables"

  - variable: env.CLUSTER_NAME
    label: "Cluster Name"
    description: "Name of the Kubernetes cluster"
    type: string
    default: "YOUR-CLUSTER-NAME"
    required: true
    group: "Environment Variables"

  - variable: env.METRICS_API_URL
    label: "Metrics API URL"
    description: "Metrics API service URL where collected metrics will be sent"
    type: string
    default: ""
    required: true
    group: "Environment Variables"

  - variable: env.NAMESPACES_TO_WATCH
    label: "Namespaces to Watch"
    description: "Comma-separated list of namespaces to monitor for metrics (one per line or comma-separated)"
    type: multiline
    default: "alerthawk,clickhouse"
    group: "Environment Variables"
    multiline: true

  - variable: env.COLLECT_LOGS
    label: "Collect Logs"
    description: "Enable log collection (set to 'true' to enable, 'false' or empty to disable)"
    type: enum
    default: "false"
    options:
      - "true"
      - "false"
    group: "Environment Variables"

  - variable: env.CLUSTER_ENVIRONMENT
    label: "Cluster Environment"
    description: "Environment name for the cluster (e.g., PROD, DEV, STAGING)"
    type: string
    default: "PROD"
    group: "Environment Variables"

  - variable: env.LOG_LEVEL
    label: "Log Level"
    description: "Logging level (Verbose, Debug, Information, Warning, Error, Fatal)"
    type: enum
    default: "Information"
    options:
      - "Verbose"
      - "Debug"
      - "Information"
      - "Warning"
      - "Error"
      - "Fatal"
    group: "Environment Variables"

  - variable: env.SENTRY_DSN
    label: "Sentry DSN (Optional)"
    description: "Sentry Data Source Name for error tracking (leave empty to use default or disable)"
    type: string
    default: ""
    group: "Environment Variables"

  - variable: env.ENVIRONMENT
    label: "Sentry Environment"
    description: "Environment name for Sentry error tracking"
    type: string
    default: "Production"
    group: "Environment Variables"

  # Security Configuration
  - variable: securityContext.allowPrivilegeEscalation
    label: "Allow Privilege Escalation"
    description: "Allow the container to gain additional privileges"
    type: boolean
    default: false
    group: "Security"

  - variable: securityContext.privileged
    label: "Privileged Mode"
    description: "Run container in privileged mode"
    type: boolean
    default: false
    group: "Security"

  - variable: securityContext.readOnlyRootFilesystem
    label: "Read-Only Root Filesystem"
    description: "Mount root filesystem as read-only"
    type: boolean
    default: false
    group: "Security"

  - variable: securityContext.runAsNonRoot
    label: "Run as Non-Root"
    description: "Run container as non-root user"
    type: boolean
    default: false
    group: "Security"

  # Resources Configuration
  - variable: resources.limits.cpu
    label: "CPU Limit"
    description: "CPU limit (e.g., 500m, 1)"
    type: string
    group: "Resources"

  - variable: resources.limits.memory
    label: "Memory Limit"
    description: "Memory limit (e.g., 512Mi, 1Gi)"
    type: string
    group: "Resources"

  - variable: resources.requests.cpu
    label: "CPU Request"
    description: "CPU request (e.g., 100m, 0.5)"
    type: string
    group: "Resources"

  - variable: resources.requests.memory
    label: "Memory Request"
    description: "Memory request (e.g., 128Mi, 512Mi)"
    type: string
    group: "Resources"

